<!DOCTYPE html>
<html lang="en">
    <head>
        <title>League of Data</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        <link rel="stylesheet" href="/stylesheets/style.css">
		<script src="/javascripts/sockets.io.js"></script>
    </head>
    <body>
		<div id="info">
			League of Data - LoD planet Viewer
		</div>

        <script src="/javascripts/three.min.js"></script>

        <script src="/javascripts/TrackballControls.js"></script>
        <script src="/javascripts/SkyShader.js"></script>
        <script src="/javascripts/tween.min.js"></script>
        <script src="/javascripts/Detector.js"></script>
        <script src="/javascripts/stats.min.js"></script>
        <script src="/javascripts/dat.gui.min.js"></script>
		
        <script src="/javascripts/objects/BalancedParticle.js"></script>
        <script src="/javascripts/objects/BalancedNode.js"></script>
        <script src="/javascripts/objects/Arc.js"></script>

		<!-- SKY custom shaders -->
		<script type="application/x-glsl" id="sky-vertex">
			varying vec2 vUV;

			void main() {
			  vUV = uv;
			  vec4 pos = vec4(position, 1.0);
			  gl_Position = projectionMatrix * modelViewMatrix * pos;
			}
		</script>

		<script type="application/x-glsl" id="sky-fragment">
			uniform sampler2D texture;
			varying vec2 vUV;

			void main() {
			  vec4 sample = texture2D(texture, vUV);
			  gl_FragColor = vec4(sample.xyz, sample.w);
			}
		</script>
		<!-- ---------------- Custom Shader Code ------------------------ -->
        <script id="vertexShader" type="x-shader/x-vertex">
			uniform vec3 viewVector;
			uniform float c;
			uniform float p;
			varying float intensity;
			void main() 
			{
				vec3 vNormal = normalize( normalMatrix * normal );
				vec3 vNormel = normalize( normalMatrix * viewVector );
				intensity = pow( c - dot(vNormal, vNormel), p );

				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}
        </script>

        <!-- fragment shader a.k.a. pixel shader -->
        <script id="fragmentShader" type="x-shader/x-vertex"> 
			uniform vec3 glowColor;
			varying float intensity;
			void main() 
			{
				vec3 glow = glowColor * intensity;
				gl_FragColor = vec4( glow, 1.0 );
			}
        </script>
		
        <script src="/javascripts/viewer.js"></script>
    </body>
</html>
